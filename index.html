<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹´ä¼šæŠ½å¥–ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
            background: linear-gradient(135deg, #8B0000 0%, #DC143C 50%, #8B0000 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            border-bottom: 4px solid #FFD700;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 72px;
            color: #FFD700;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.6);
            letter-spacing: 16px;
            margin-bottom: 10px;
        }

        .config-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 40px;
            border: 3px solid #FFD700;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
        }

        .config-title {
            font-size: 28px;
            color: #FFD700;
            margin-bottom: 25px;
            font-weight: bold;
            text-align: center;
        }

        .config-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            max-width: 900px;
            margin: 0 auto;
        }

        .control-group {
            background: rgba(255, 255, 255, 0.2);
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #FFD700;
        }

        .control-group label {
            display: block;
            font-size: 20px;
            color: #FFD700;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .control-group select,
        .control-group input {
            width: 100%;
            padding: 15px;
            font-size: 20px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            font-weight: bold;
        }

        .control-group input {
            text-align: center;
        }

        .lottery-display {
            background: rgba(0, 0, 0, 0.4);
            border: 5px solid #FFD700;
            border-radius: 25px;
            padding: 50px;
            text-align: center;
            margin: 50px 0;
            height: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 15px 50px rgba(0,0,0,0.6);
            overflow: hidden;
        }

        .current-prize-info {
            font-size: 40px;
            color: #FFD700;
            margin-bottom: 40px;
            font-weight: bold;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lottery-name-container {
            width: 1400px;
            height: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin: 0 auto;
        }

        .lottery-name {
            font-size: 160px;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 5px 5px 10px rgba(0,0,0,0.8);
            letter-spacing: 5px;
            white-space: nowrap;
            display: inline-block;
            transform-origin: center center;
            transition: transform 0.1s ease-out;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 50px 0;
            flex-wrap: wrap;
            height: 90px;
            align-items: center;
        }

        .btn {
            padding: 25px 80px;
            font-size: 32px;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            letter-spacing: 6px;
            height: 85px;
        }

        .btn-start {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #8B0000;
        }

        .btn-start:hover:not(:disabled) {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(255, 215, 0, 0.7);
        }

        .btn-start:disabled {
            background: #888;
            cursor: not-allowed;
            transform: none;
        }

        .btn-stop {
            background: linear-gradient(135deg, #DC143C, #8B0000);
            color: #FFD700;
        }

        .btn-stop:hover:not(:disabled) {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(220, 20, 60, 0.7);
        }

        .btn-stop:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .btn-reset {
            background: rgba(255, 255, 255, 0.25);
            color: #fff;
            border: 2px solid #FFD700;
            padding: 18px 50px;
            font-size: 20px;
            height: auto;
        }

        .btn-reset:hover {
            background: rgba(255, 255, 255, 0.35);
            transform: translateY(-2px);
        }

        .winners-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 35px;
            margin-top: 50px;
            border: 3px solid #FFD700;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
        }

        .winners-title {
            font-size: 32px;
            color: #FFD700;
            font-weight: bold;
            margin-bottom: 30px;
            text-align: center;
        }

        .winner-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px 30px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 6px solid #FFD700;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .winner-prize {
            font-size: 22px;
            color: #FFD700;
            font-weight: bold;
        }

        .winner-name {
            font-size: 24px;
            font-weight: bold;
        }

        .empty-message {
            text-align: center;
            font-size: 22px;
            color: #FFD700;
            opacity: 0.7;
            padding: 40px;
        }

        @keyframes glow {
            0%, 100% { 
                text-shadow: 0 0 30px #FFD700, 0 0 50px #FFD700; 
            }
            50% { 
                text-shadow: 0 0 50px #FFD700, 0 0 80px #FFD700, 0 0 100px #FFD700; 
            }
        }

        .lottery-name.rolling {
            animation: glow 0.6s infinite;
        }

        .pool-info {
            text-align: center;
            font-size: 18px;
            color: #FFD700;
            margin-top: 20px;
            opacity: 0.9;
        }

        .completion-message {
            font-size: 28px;
            color: #FFD700;
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 215, 0, 0.2);
            border-radius: 10px;
            font-weight: bold;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #completionMessage {
            height: 80px;
        }

        #completionMessage:empty {
            height: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŠ å¹´ä¼šæŠ½å¥– ğŸŠ</h1>
        </div>

        <div class="config-section">
            <div class="config-title">ğŸ æŠ½å¥–è®¾ç½®</div>
            <div class="config-controls">
                <div class="control-group">
                    <label for="prizeSelect">é€‰æ‹©æŠ½ä»€ä¹ˆå¥–å“ï¼š</label>
                    <select id="prizeSelect">
                        <option value="è“ç‰™è€³æœº">è“ç‰™è€³æœº</option>
                        <option value="åŒè‚©åŒ…">åŒè‚©åŒ…</option>
                        <option value="å’–å•¡æœº">å’–å•¡æœº</option>
                        <option value="ç”µç…®é”…">ç”µç…®é”…</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="countInput">æœ¬è½®è®¡åˆ’æŠ½å‡ ä¸ªï¼š</label>
                    <input type="number" id="countInput" min="1" value="1">
                </div>
            </div>
            <div class="pool-info">
                å½“å‰å¥–æ± å‰©ä½™äººæ•°ï¼š<strong><span id="poolCount">182</span></strong> äºº
            </div>
        </div>

        <div class="lottery-display">
            <div class="current-prize-info" id="currentPrizeInfo">è¯·è®¾ç½®æŠ½å¥–å‚æ•°åå¼€å§‹</div>
            <div class="lottery-name-container">
                <div class="lottery-name" id="lotteryName">å‡†å¤‡å¼€å§‹</div>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-start" id="startBtn">å¼€å§‹æŠ½å¥–</button>
            <button class="btn btn-stop" id="stopBtn" disabled>åœæ­¢</button>
        </div>
        
        <div id="completionMessage"></div>

        <div class="controls">
            <button class="btn btn-reset" id="resetBtn">å®Œå…¨é‡ç½®ï¼ˆæ¸…ç©ºæ‰€æœ‰ä¸­å¥–è®°å½•ï¼‰</button>
        </div>

        <div class="winners-section">
            <div class="winners-title">ğŸ† ä¸­å¥–åå•</div>
            <div id="winnersContent">
                <div class="empty-message">æš‚æ— ä¸­å¥–è®°å½•</div>
            </div>
        </div>
    </div>

    <script>
        // ==================== åˆå§‹å¥–æ± ï¼ˆ182äºº - æœ€ç»ˆç¡®è®¤åå•ï¼‰ ====================
        const INITIAL_POOL = [
            'ç‹å»ºå½¬', 'ç‹ä¹‰', 'èµµçº¢åˆš', 'ä¸‡å°‘è™', 'èŒƒä¼šé¾™', 'åºæ˜Š', 'æ®µå‡¯æ—º', 'ä½•ç«‹æ–‡',
            'å†¯æ™“å†›', 'èµµå­¦åˆš', 'äºåŒæ±Ÿ', 'ç‹ç«‹æ•', 'ç‹äº¬ç¦', 'æå®å¿—', 'çŸ³æµ·æ³¢', 'ç‹å›½ä¸œ',
            'ç‹ç›Šå”±', 'ç‹çº¢åˆš', 'å•å¿ ä¿¡', 'éŸ©å»ºå›½', 'ä¸å›½å¿ ', 'åˆ˜å£«å­˜', 'å­™ä»•å„’', 'æ¢…èŒèŒ',
            'éƒ­å¸…', 'å”æ‚¦', 'åˆ˜å»ºå‹‹', 'ç‹å°åˆš', 'æç‰å±±', 'å»–å¿—æ•', 'å§œæ°¸', 'å­™äº‘å†›',
            'åˆ˜è¿›é”‹', 'æˆ´ç»ç¥¥', 'éƒ‘å­¦é‡‘', 'æ¨æ˜¥é¹', 'å§œåšæº', 'æ›¹å°å‹‡', 'æ®µç«‹å»º', 'åˆ˜ä¸½',
            'åˆ˜å›', 'å‘¨è¿æ³½', 'å¼ ä¸‰æœ‰', 'æç‰ç', 'åˆ˜æ¿®', 'å”è”', 'ä½•æˆä¹‰', 'é»„èŒœ',
            'å¾ç´«æ€¡', 'å­Ÿæ¶Ÿæ¼ª', 'é«˜é–è½©', 'å¼ æ¸…æ¨¾', 'æ¯›æ™“ç‡•', 'è®¸å²±å½¤', 'è™å­ç¼', 'æ—å˜‰èª',
            'æ½˜å›½æ©', 'æè¾¾è£', 'æ¢ç¿æº', 'æœ±æµ·é¾™', 'å¼ å‘ä¸œ', 'æè¶…', 'æ›¹æ—º', 'å¼ å¼º',
            'ææ±ä¼š', 'é—«å¿ é›·', 'è‘£çˆ±ç§‘', 'çŸ³äº‘é¾™', 'ç‹å¿—éŸ§', 'å¼ ä¸­æ¢', 'ç‹å»ºå†›', 'ææˆå“',
            'è‘›æ³¢', 'ç‹æ–‡è¶…', 'åˆ˜å›½æ³•', 'å•†è¶…æ ‹', 'é™ˆè…¾', 'æä¹‰è¾‰', 'é™ˆæµ©æ°¸', 'æ¨çˆ±æ—',
            'æ»•å½¦æ¸…', 'å­™é’Š', 'è€¿è¶…', 'é™ˆæ˜æ­Œ', 'å¼ å°ä¸œ', 'æ¨æ–Œæ–Œ', 'ç‹æ™“é¾™', 'è£´æ¶¦çº¢',
            'å²æ°¸è¶…', 'åˆ˜æ¶›', 'åˆ˜å£«å', 'é™ˆç¾æ–°', 'é™ˆé›„', 'è°¢ç§€æ—', 'è‹å»ºä»˜', 'é™ˆå¿—',
            'å´å¼º', 'é™ˆä¿Šæ°', 'é™ˆæˆå³°', 'é™ˆé›„ä¼Ÿ', 'å¼ æ˜¥å¼º', 'èµµå°ä¸œ', 'å¤å¯…', 'èƒ¡æœ‰çº¢',
            'é™ˆå–œä¸œ', 'MELISSA TORRES CASTELO', 'LOANNA YADHIRA CONTRERAS CHIRINOS', 'MAYLIN IZUMI PINILLOS RIOS',
            'LIZ GUTIÃ‰RREZ QUISPE', 'MARIA DE LOS ANGELES CRUZ TERRAZAS', 'FIORELLA ESTHER GOICOCHEA VELASQUES',
            'Brenda Rivera Sifuentes', 'Maria de los Angeles Cruz Terrazas', 'Max Villena MuÃ±oa',
            'ESTEBAN INGAROCA LUIS', 'SOTELO ESPINOZA JORGE', 'SALAZAR IPANAQUE JAVIER', 'YAURI SAGASTE JACQUELINE',
            'CCOLLCCA TAMBRAICO YULLMA', 'BARRAZA DENEGRI KATIA', 'MELENDEZ GOMEZ ALEXANDER', 'MORALES MEDINA MIGUEL',
            'LEVANO COLLACHAGUA LISETH', 'CUBA SHUNA DANIEL', 'DE LA CRUZ QUISPE EDGAR', 'ESTEBAN CAMPOS LOURDES',
            'RUBIO HUAYTA SUNILDA', 'Cleber Castillon', 'Jean Hostia', 'Victor Almeyda',
            'Enrique LOAYZA moreano', 'Victoria Areas de loayza', 'LOAYZA Areas Enrique', 'Angel Cordova',
            'VICTOR MALCA', 'CARLOS ABARCA', 'EDWIN PARI CHURATA', 'MOISES VASQUEZ',
            'Cristian', 'Sarita la rosa giron', 'Ronald burneo anderstar', 'Junior chambergo huilcanina',
            'Junior antezana zacarias', 'Fabian Farfan Cornejo', 'Jefrey', 'JUAN CLIMACO CONTRERAS VEGA',
            'Claudia de la cruz', 'Luana ramos', 'Franchesca Ubeta', 'Nilson Flores',
            'Luis Mayuri', 'Alcides Enrique Requejo castillo', 'Edgar Arnol De La Cruz Quispe', 'Juan Eduardo Vilchez Vite',
            'Jimy Enrique Huarcaya Antezana', 'LILIANA YANINA AGUINAGA BECERRA', 'ISAAC ROJAS', 'GONZALO PASACHE',
            'Wiliam MontaÃ±o', 'Franciescole Joel Salazar', 'DIEGO ALONSO SALINAS REVILLA', 'Jose Luis Diaz Ruiz',
            'Daniel Guillermo Carrasco', 'Ruth Quispe Llocclla', 'Cyntria Nataly Farfan Herrera'
        ];

        // ==================== çŠ¶æ€å˜é‡ ====================
        let currentPool = [];
        let allWinners = [];
        let isRolling = false;
        let rollInterval = null;
        let currentPrize = '';
        let remainingCount = 0;

        // ==================== DOM å…ƒç´  ====================
        const prizeSelect = document.getElementById('prizeSelect');
        const countInput = document.getElementById('countInput');
        const currentPrizeInfo = document.getElementById('currentPrizeInfo');
        const lotteryName = document.getElementById('lotteryName');
        const lotteryNameContainer = document.querySelector('.lottery-name-container');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const resetBtn = document.getElementById('resetBtn');
        const winnersContent = document.getElementById('winnersContent');
        const poolCount = document.getElementById('poolCount');
        const completionMessage = document.getElementById('completionMessage');

        // ==================== å­—ä½“å¤§å°è‡ªé€‚åº”ï¼ˆä½¿ç”¨çœŸå®DOMå®½åº¦ï¼‰ ====================
        function adjustFontSize() {
            // é‡ç½®ç¼©æ”¾ï¼Œè·å–çœŸå®å®½åº¦
            lotteryName.style.transform = 'scale(1)';
            
            // ç­‰å¾…DOMæ›´æ–°
            setTimeout(() => {
                const scrollWidth = lotteryName.scrollWidth;
                const containerWidth = lotteryNameContainer.clientWidth;
                
                // å¦‚æœå†…å®¹è¶…å‡ºå®¹å™¨ï¼ŒæŒ‰æ¯”ä¾‹ç¼©å°
                if (scrollWidth > containerWidth) {
                    const scale = containerWidth / scrollWidth;
                    lotteryName.style.transform = `scale(${scale})`;
                }
            }, 0);
        }

        // ==================== åˆå§‹åŒ– ====================
        function init() {
            loadData();
            updatePoolCount();
            renderWinners();
            updatePrizeInfo();
        }

        function loadData() {
            const savedWinners = localStorage.getItem('lottery_winners');
            if (savedWinners) {
                allWinners = JSON.parse(savedWinners);
            }

            const winnerNames = new Set(allWinners.map(w => w.name));
            currentPool = INITIAL_POOL.filter(name => !winnerNames.has(name));
        }

        function saveData() {
            localStorage.setItem('lottery_winners', JSON.stringify(allWinners));
        }

        function updatePoolCount() {
            poolCount.textContent = currentPool.length;
        }

        function updatePrizeInfo() {
            if (remainingCount > 0) {
                currentPrizeInfo.textContent = `ğŸ å½“å‰å¥–å“ï¼š${currentPrize}ï¼ˆè¿˜éœ€æŠ½ ${remainingCount} äººï¼‰`;
            } else {
                currentPrizeInfo.textContent = 'è¯·è®¾ç½®æŠ½å¥–å‚æ•°åå¼€å§‹';
            }
        }

        function renderWinners() {
            if (allWinners.length === 0) {
                winnersContent.innerHTML = '<div class="empty-message">æš‚æ— ä¸­å¥–è®°å½•</div>';
                return;
            }

            let html = '';
            allWinners.forEach(winner => {
                html += `
                    <div class="winner-item">
                        <div class="winner-prize">ğŸ ${winner.prize}</div>
                        <div class="winner-name">${winner.name}</div>
                    </div>
                `;
            });
            winnersContent.innerHTML = html;
        }

        // ==================== æŠ½å¥–é€»è¾‘ï¼ˆä¼˜åŒ–èŠ‚å¥æ§åˆ¶ï¼‰ ====================
        function startLottery() {
            // å¦‚æœæ˜¯æ–°çš„ä¸€è½®æŠ½å¥–ï¼Œä»è¾“å…¥æ¡†è·å–å‚æ•°
            if (remainingCount === 0) {
                currentPrize = prizeSelect.value;
                remainingCount = parseInt(countInput.value);

                if (!remainingCount || remainingCount < 1) {
                    alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æŠ½å¥–æ•°é‡ï¼');
                    return;
                }
                
                // æ¸…ç©ºå®Œæˆæç¤º
                completionMessage.innerHTML = '';
            }

            if (currentPool.length === 0) {
                alert('å¥–æ± å·²ç©ºï¼Œæ²¡æœ‰å¯æŠ½å¥–çš„äººå‘˜ï¼');
                return;
            }

            isRolling = true;
            startBtn.disabled = true;
            stopBtn.disabled = false;
            lotteryName.classList.add('rolling');

            updatePrizeInfo();

            // åªæ»šåŠ¨ä¸€ä¸ªåå­—ï¼Œå¹¶åŠ¨æ€è°ƒæ•´å­—ä½“å¤§å°
            rollInterval = setInterval(() => {
                const randomIndex = Math.floor(Math.random() * currentPool.length);
                const name = currentPool[randomIndex];
                lotteryName.textContent = name;
                adjustFontSize();
            }, 80);
        }

        function stopLottery() {
            if (!isRolling) return;

            clearInterval(rollInterval);
            isRolling = false;
            startBtn.disabled = false;
            stopBtn.disabled = true;
            lotteryName.classList.remove('rolling');

            // éšæœºé€‰ä¸­1ä¸ªäºº
            const randomIndex = Math.floor(Math.random() * currentPool.length);
            const winnerName = currentPool[randomIndex];
            lotteryName.textContent = winnerName;
            adjustFontSize();

            // è®°å½•ä¸­å¥–
            allWinners.push({
                name: winnerName,
                prize: currentPrize,
                timestamp: Date.now()
            });

            // ä»å¥–æ± ç§»é™¤
            currentPool.splice(randomIndex, 1);

            // å‰©ä½™æ•°é‡-1
            remainingCount--;

            // ä¿å­˜å¹¶æ›´æ–°æ˜¾ç¤º
            saveData();
            updatePoolCount();
            renderWinners();
            updatePrizeInfo();

            // åªåœ¨æœ¬è½®æœ€åä¸€ä¸ªä¸­å¥–äººæ—¶æ˜¾ç¤ºå®Œæˆæç¤º
            if (remainingCount === 0) {
                completionMessage.innerHTML = `
                    <div class="completion-message">
                        ğŸ‰ ${currentPrize} æœ¬è½®æŠ½å¥–å®Œæˆï¼
                    </div>
                `;
                currentPrizeInfo.textContent = 'è¯·è®¾ç½®ä¸‹ä¸€è½®æŠ½å¥–å‚æ•°';
            }
            // å¦åˆ™ä¿æŒå§“åæ˜¾ç¤ºï¼Œä¸å¼¹çª—ï¼Œä¸é‡ç½®ï¼Œå…è®¸ç»§ç»­æŠ½å¥–
        }

        function resetAll() {
            if (!confirm('ç¡®å®šè¦å®Œå…¨é‡ç½®å—ï¼Ÿ\n\nå°†æ¸…ç©ºæ‰€æœ‰ä¸­å¥–è®°å½•ï¼Œæ‰€æœ‰äººå‘˜é‡æ–°è¿›å…¥å¥–æ± ï¼')) {
                return;
            }

            allWinners = [];
            currentPool = [...INITIAL_POOL];
            remainingCount = 0;
            currentPrize = '';
            localStorage.removeItem('lottery_winners');

            updatePoolCount();
            renderWinners();
            updatePrizeInfo();
            lotteryName.textContent = 'å‡†å¤‡å¼€å§‹';
            lotteryName.style.transform = 'scale(1)';
            completionMessage.innerHTML = '';

            alert('é‡ç½®å®Œæˆï¼');
        }

        // ==================== äº‹ä»¶ç›‘å¬ ====================
        startBtn.addEventListener('click', startLottery);
        stopBtn.addEventListener('click', stopLottery);
        resetBtn.addEventListener('click', resetAll);

        // ç›‘å¬é…ç½®å˜åŒ–ï¼ˆå½“remainingCountä¸º0æ—¶æ‰å…è®¸ä¿®æ”¹ï¼‰
        prizeSelect.addEventListener('change', () => {
            if (remainingCount === 0) {
                completionMessage.innerHTML = '';
            }
        });

        countInput.addEventListener('change', () => {
            if (remainingCount === 0) {
                completionMessage.innerHTML = '';
            }
        });

        init();
    </script>
</body>
</html>
